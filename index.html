<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link rel="stylesheet" href="CSS/style.css">
</head>
<body>

    <div id="curseur"></div>

    <div id="menu-sortant-main">

        <div id="menu-sortant">

            <div id="nav-menu-sortant">
    <div id="close"><p>‚Üê Back</p></div>
    <div><a href="index.html">Home</a></div>
</div>


            <div class="line"></div>

            <div class="main-container">
                <div class="number">
                    01.
                </div>

                <div class="text">
                    <a href="HTML/dev.html"><h2>Web developpement</h2>
                    <p>Continue ‚Üí</p></a>
                </div>
            </div>

            <div class="line"></div>

            <div class="main-container">
                <div class="number">
                    02.
                </div>

                <div class="text">
                    <a href="HTML/photo.html"><h2>Photography</h2>
                    <p>Continue ‚Üí</p></a>
                </div>
            </div>

            <div class="line"></div>

            <div class="main-container">
                <div class="number">
                    03.
                </div>

                <div class="text">
                    <a href="HTML/cinema.html"><h2>Cinematography</h2>
                    <p>Continue ‚Üí</p></a>
                </div>
            </div>

            <div class="line"></div>

            <div class="main-container">
                <div class="number">
                    04.
                </div>

                <div class="text">
                    <a href="HTML/design.html"><h2>Graphic Design</h2>
                    <p>Continue ‚Üí</p></a>
                </div>
            </div>

            <div class="line"></div>


        </div>

    </div>



    <header>

        <div id="div-btn-menu">
            <img id="btn-menu" src="Icon/menu.svg" alt="">
        </div>
<div id="authBox">
  <!-- Rempli en JS : bouton "Cr√©er un compte" OU "Bonjour, Pr√©nom" -->
</div>
        <div id="divNavLinks">
            <a class="navlinks" href="HTML/about.html">About</a>
            <a class="navlinks" href="#section3">Contact</a>
        </div>
        <!-- Bouton / message d'auth -->


    </header>


    

    <div id="points">
        <p id="point1">¬∑</p>
        <p id="point2">¬∑</p>
        <p id="point3">¬∑</p>
    </div>




    <section id="presentation">

        <article>

            <div id="titre">
                
                <h1>PORTFOLIO</h1>

                <div id="prenomdate">
                    <p>Jan Jawish</p>
                    <p>2024-2025</p>
                </div>
            </div>
        </article>


      
<aside>        
    <div id="texte-presentation">
        <p>
            Salut, moi c‚Äôest Jan.<br>
            Passionn√© par la <b>photographie</b> et le <b>d√©veloppement web</b>, j‚Äôexprime ma vision √† travers l‚Äôimage et le code.
        </p>

        <div style="margin-top: 20px; text-align: left;">
            <div style="margin-bottom: 10px;">
                <img src="https://img.icons8.com/ios-filled/20/000000/new-post.png" style="vertical-align: middle; margin-right: 8px;">
                <a href="mailto:contact@janjawish.fr" style="text-decoration: none; color: inherit;">contact@janjawish.fr</a>
            </div>
            <div style="margin-bottom: 10px;">
                <img src="https://img.icons8.com/ios-filled/20/000000/instagram-new.png" style="vertical-align: middle; margin-right: 8px;">
                <a href="https://www.instagram.com/jan.jawish_" target="_blank" style="text-decoration: none; color: inherit;">@jan.jawish_</a>
            </div>
            <div style="margin-bottom: 10px;">
                <img src="https://img.icons8.com/ios-filled/20/000000/youtube-play.png" style="vertical-align: middle; margin-right: 8px;">
                <a href="https://www.youtube.com/@jan.jawish" target="_blank" style="text-decoration: none; color: inherit;">YouTube jan.jawish</a>
            </div>
            <div>
                <img src="https://img.icons8.com/ios-filled/20/000000/linkedin.png" style="vertical-align: middle; margin-right: 8px;">
                <a href="https://www.linkedin.com/in/jan-jawish-344808359/" target="_blank" style="text-decoration: none; color: inherit;">LinkedIn</a>
            </div>
        </div>
    </div>

    <div id="div-btn-explore">
        <a href="#section2"><button>Scroll pour d√©couvrir ‚Üì</button></a>
    </div>
</aside>



        

    </section>


    <section id="section2">

        <div id="gauche">
            <div><H2>DERNIERS PROJETS</H2></div>

            <div id="projet1">
                <div>
                    <a href="http://oopticien.fr"><img class="anim-image" src="mobile/logo o opticien ok_page-0001.jpg" alt="" loading="lazy"></a>
                </div>
                

                <div class="description-projet">
                    <p>Site d√©velopp√© avec le centre optique OOPTICIEN.</p>
                    <p>2025</p>
                </div>

            </div>
        </div>

        <div id="droit">

            <div id="projet2">

                <div>
                    <a href="http://etukit.fr"><img class="anim-image" src="images/Black White Scrapbook Monochrome Group Project Presentation.png" alt="" loading="lazy"></a>
                </div>

                <div class="description-projet">
                    <p>Projet personnel pour aider les √©tudiants dans leur t√¢ches les plus complexes.</p>
                    <p>2024</p>
                </div>

            </div>

            <button id="btnToutVoir">Tout voir  ‚Üí</button>
        </div>


    </section>




    <section id="section3">
  <form action="#" method="POST">
    <article>
      <div>
        <input name="prenom" type="text" placeholder="Pr√©nom">
        <input name="nom" type="text" placeholder="Nom">
        <input name="email" type="email" placeholder="Votre e-mail">
        <input name="sujet" type="text" placeholder="Sujet de votre mail">
      </div>

      <div>
        <textarea name="message" placeholder="√âcrivez votre message ici" rows="5"></textarea>
      </div>
    </article>
<input type="hidden" name="csrf" id="contact-csrf">

    <input id="btn-envoyer-msg" type="submit" value="envoyer">
  </form>
</section>



    <a href="#presentation"><div id="divfleche"><p id="fleche">‚Üë</p></div></a>

    <script src="JS/main.js"></script>
<script>
  window.addEventListener("load", () => {
    const loader = document.getElementById("loader");

    // V√©rifie si le loader a d√©j√† √©t√© affich√© pendant cette session
    const alreadyVisited = sessionStorage.getItem("loaderShown");

    if (!alreadyVisited) {
      // Premi√®re visite ‚Üí afficher le loader
      document.body.style.visibility = "hidden";
      document.body.style.overflow = "hidden";

      setTimeout(() => {
        loader.classList.add("fade-out");
        document.body.style.visibility = "visible";
        document.body.style.overflow = "auto";
        sessionStorage.setItem("loaderShown", "true");
      }, 2500);
    } else {
      // Visite suivante ‚Üí ne pas afficher le loader
      loader.style.display = "none";
      document.body.style.visibility = "visible";
      document.body.style.overflow = "auto";
    }
  });
</script>

<script>
  const btnMenu = document.getElementById("btn-menu");
  const menu = document.getElementById("menu-sortant-main");
  const close = document.getElementById("close");

  btnMenu.addEventListener("click", () => {
    menu.classList.add("active");
  });

  close.addEventListener("click", () => {
    menu.classList.remove("active");
  });
</script>





<div id="loader">
  <div class="bloc-chargement">
    <div class="barre-longue">
      <div class="carre"></div>
      <div class="carre"></div>
      <div class="carre"></div>
      <div class="carre"></div>
      <div class="carre"></div>
      <div class="carre"></div>
      <div class="carre"></div>
      <div class="carre"></div>
      <div class="carre"></div>
      <div class="carre"></div>
    </div>
    <p class="texte-chargement">Chargement...</p>
  </div>
</div>


<script>
// Emp√™che le drag d'images
document.addEventListener("dragstart", function(e) {
  if (e.target.nodeName === "IMG") {
    e.preventDefault();
  }
});

// Emp√™che clic droit
document.addEventListener("contextmenu", function(e) {
  e.preventDefault();
});

// Bloque certaines combinaisons clavier
document.addEventListener("keydown", function(e) {
  // F12
  if (e.key === "F12") {
    e.preventDefault();
  }

  // Ctrl+S, Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+Shift+C
  if (
    (e.ctrlKey && e.key.toLowerCase() === "s") ||
    (e.ctrlKey && e.key.toLowerCase() === "u") ||
    (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "i") ||
    (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "j") ||
    (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "c")
  ) {
    e.preventDefault();
  }
});
</script>


<script>
    if (window.innerWidth <= 768 && window.location.pathname.indexOf("/mobile") === -1) {
      window.location.href = "mobile/index.html";
    }
  </script>
<script>
  // üîí Anti-inspection
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('keydown', e => {
    if (
      e.key === 'F12' ||
      (e.ctrlKey && ['u', 'U', 's', 'S'].includes(e.key)) ||
      (e.ctrlKey && e.shiftKey && ['I', 'i', 'J', 'j', 'C', 'c'].includes(e.key))
    ) {
      e.preventDefault();
    }
  });
</script>
<script>
  // Base vers /auth/ et /auth/api/ depuis la page racine
  const AUTH_ROOT = new URL('auth/', window.location.href).href;
  const AUTH_API  = new URL('api/', AUTH_ROOT).href;
  let CSRF = null;

  async function bootstrapCSRF() {
    try {
      const r = await fetch(`${AUTH_API}send_code.php?bootstrap=1`, { credentials:'include' });
      const j = await r.json();
      if (j && j.csrf) {
        CSRF = j.csrf;
        const input = document.getElementById('contact-csrf');
        if (input) input.value = CSRF;
      }
    } catch(e){}
  }

  // Remplit le header selon la session
  async function renderAuthBox() {
    const box = document.getElementById('authBox');
    if (!box) return;
    if (!CSRF) await bootstrapCSRF();

    try {
      const r = await fetch(`${AUTH_API}me.php`, { credentials: 'include' });
      const j = await r.json();

      if (j.ok && j.logged_in) {
        const first = (j.name || '').split(' ')[0] || j.name || 'üëã';
        box.innerHTML = `
          <a class="btn-auth" href="messages.php">Me contacter</a>
          <span class="hello">Bonjour, ${first}</span>
          <button class="btn-auth" id="btn-logout" type="button">Se d√©connecter</button>
        `;

document.getElementById('btn-logout')?.addEventListener('click', async ()=>{
  const fd = new FormData(); fd.append('csrf', CSRF || '');
  try{
    const r = await fetch(`${AUTH_API}logout.php`, { method:'POST', body: fd, credentials:'include' });
    const j = await r.json().catch(()=> ({}));
    if (r.ok && j.ok) location.reload();
    else alert(j.error || 'D√©connexion impossible (CSRF ?)');   // <-- feedback utile
  }catch(_){
    alert('D√©connexion: erreur r√©seau');
  }
});

      } else {
        const signupURL = new URL('index.html#signup', AUTH_ROOT).href;
        box.innerHTML = `
        `;
      }
    } catch (e) {
      const signupURL = new URL('index.html#signup', AUTH_ROOT).href;
    }
  }

  // Envoi AJAX du formulaire de contact
  function wireContactForm() {
    const form = document.querySelector('#section3 form');
    if (!form) return;

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      if (!CSRF) await bootstrapCSRF();

      const fd = new FormData(form);
      if (!fd.get('csrf') && CSRF) fd.append('csrf', CSRF);

      const btn = document.getElementById('btn-envoyer-msg');
      const label0 = btn.value;
      btn.value = 'Envoi...'; btn.disabled = true;

try{
  const r = await fetch(`${AUTH_API}contact.php`, { method:'POST', body: fd, credentials:'include' });
  let j = null;
  try { j = await r.json(); }
  catch(e){ const t = await r.text(); throw new Error(t || `HTTP ${r.status}`); }

  if (r.ok && j && j.ok) {
    btn.value = 'Message envoy√© ‚úÖ';
    form.reset();
    const input = document.getElementById('contact-csrf');
    if (input && CSRF) input.value = CSRF;
  } else {
    btn.value = 'R√©essayer';
    alert((j && j.error) || `Erreur (${r.status})`);
  }
}catch(err){
  btn.value = 'R√©essayer';
  alert(err.message || 'Erreur r√©seau');
}finally{
        setTimeout(()=>{ btn.value = label0; btn.disabled = false; }, 1200);
      }
    });
  }

  (async function init(){
    await bootstrapCSRF();
    await renderAuthBox();
    wireContactForm();
  })();
</script>



</body>
</html>
